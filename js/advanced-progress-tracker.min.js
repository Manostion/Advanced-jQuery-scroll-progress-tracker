$.fn.progressTracker=function(o){function l(){$("#TrackScrollProgress .trackThis").each(function(o){var l=$(this),t=l.children("h3"),e=t.text(),s=i.offset().top,c=l.offset().top-s,d=o+1,h=c/r()*100,S=$(".scrollStopContainer"),T=$(".vertScrollStopContainer"),v=$(".scrollStopTitles"),f=$(".vertScrollStopTitles");if(h>100&&(h=100),S.children(".stop"+d).css("left",h+"%"),T.children(".stop"+d).css("top",h+"%"),v.children(".stop"+d).css("left",h+"%"),v.children(".stopTitle.onlyActive").css("left","-8px").addClass("reached"),f.children(".stop"+d).css("top",h+"%"),$(window).scrollTop()<=$("#TrackScrollProgress .trackThis:first").offset().top-s+$("#TrackScrollProgress .trackThis:first").children("h3").outerHeight()+a/2&&v.children(".stopTitle.onlyActive").text(""),$(window).scrollTop()>=c+t.outerHeight()+a){v.children(".stopTitle.onlyActive").text(e);{$(window).scrollTop()+$(window).height()}""!=p.finalStopTitle&&($(window).width()<=p.mobileThreshold?($(window).scrollTop()+$(window).height()>=i.offset().top+i.height()+2*a||$(window).scrollTop()+$(window).height()>=$(document).outerHeight())&&v.children(".stopTitle.onlyActive").text(p.finalStopTitle):$(window).scrollTop()+$(window).height()>=$(document).outerHeight()&&v.children(".stopTitle.onlyActive").text(p.finalStopTitle))}p.horOnlyActiveTitle?(v.children(".stop"+d).css("display","none"),v.children(".stopTitle.onlyActive").css("display","block")):(v.children(".stop"+d).css("display","block"),v.children(".stopTitle.onlyActive").css("display","none")),"top"==p.horTitlesOffset?v.children(".stopTitle").css("margin-left","8px"):"bottom"==p.horTitlesOffset?(v.children(".stopTitle").css("margin-top","38px").css("margin-left","8px"),v.children(".finalStopTitle").css("margin-top","38px")):(v.children(".stopTitle").css("margin-top","18px").css("margin-left","25px"),v.children(".finalStopTitle").css("margin-top","18px").css("margin-right","16px")),n()>=c?$(".stop"+d).addClass("reached"):$(".stop"+d).removeClass("reached"),n()>=r()?$(".finalStopCircle, .finalStopTitle").addClass("reached"):$(".finalStopCircle, .finalStopTitle").removeClass("reached")})}var t,e,i,s,r,n,c,a,p=$.extend({mobileThreshold:1024,horTracker:!0,horPosition:"top",horMobile:!0,horMobileOnly:!1,verTracker:!1,verPosition:"left",verMobile:!1,verMobileOnly:!1,horStops:!0,verStops:!0,horNumbering:!0,verNumbering:!1,horTitles:!1,horTitlesOffset:"bottom",horOnlyActiveTitle:!0,verTitles:!0,addFinalStop:!1,finalStopTitle:"",hovering:!0,linking:!0,skipHeadlines:!1,scrollSpeed:800,trackViewport:!0},o);r=function(){return i.outerHeight()+a},p.trackViewport?(c=$(window).scrollTop()+$(window).height(),n=function(){return $(window).scrollTop()+$(window).height()-i.offset().top}):(c=$(window).scrollTop(),n=function(){return $(window).scrollTop()-i.offset().top+e}),$(document).ready(function(){function o(){$("#TrackScrollProgress .trackThis").each(function(o){var l,t=$(this).children("h3"),e=o+1,i=$(".scrollStopContainer"),s=$(".vertScrollStopContainer"),r=$(".scrollStopTitles"),n=$(".vertScrollStopTitles");if(l=t.attr("data-name")?t.attr("data-name"):t.text(),$(this).attr("id","Section"+e),$(this).children("h3").attr({id:"SectionHeadline"+e}),i.append('<div class="stopCircle stop'+e+'" data-index="'+e+'"></div>'),s.append('<div class="stopCircle stop'+e+'" data-index="'+e+'"></div>'),r.append('<div class="stopTitle stop'+e+'" data-index="'+e+'">'+l+"</div>"),n.append('<div class="stopTitle stop'+e+'" data-index="'+e+'">'+l+"</div>"),p.horNumbering&&(i.children(".stopCircle.stop"+e).append(e),p.addFinalStop)){var c=i.children(".stopCircle").length+1;i.children(".finalStopCircle").text(c)}if(p.verNumbering&&(s.children(".stopCircle.stop"+e).append(e),p.addFinalStop)){var c=s.children(".stopCircle").length+1;s.children(".finalStopCircle").text(c)}}),$(window).resize()}if($("h3.trackThis").length){var d=0;$("h3.trackThis").each(function(){d++,$(this).removeClass("trackThis").wrap('<div id="Section'+d+'" class="trackThis"></div>');for(var o=!1;!o;)$("#Section"+d).next().length?$("#Section"+d).next()[0]!=$("#Section"+d).siblings("h3.trackThis")[0]?$("#Section"+d).append($("#Section"+d).next()):o=!0:o=!0})}if(i=$("#TrackScrollProgress").length?$("#TrackScrollProgress"):$(document),a=($("#TrackScrollProgress .trackThis > h3:first").outerHeight(!0)-$("#TrackScrollProgress .trackThis > h3:first").outerHeight())/2,p.horTracker?($("body").append('<div class="horizontalScrollProgress"></div>'),"max"in document.createElement("progress")?($(".horizontalScrollProgress").append('<progress class="scrollProgress"></progress>'),s=$(".scrollProgress")):($(".horizontalScrollProgress").append('<div class="scrollProgressContainer centerAll"><span class="scrollProgressBar"></span></div>'),s=$(".scrollProgressContainer")),"bottom"==p.horPosition?($(".horizontalScrollProgress").addClass("bottom"),$("body").css("padding-bottom",$(".horizontalScrollProgress").height())):$("body").css("padding-top",$(".horizontalScrollProgress").height()),e=$(".horizontalScrollProgress").height()):e=0,p.horTracker&&($(".scrollProgress").addClass("centerAll").attr("value","0"),p.horTitles?$('<div class="scrollStopTitles centerAll"></div>').insertAfter(s):s.addClass("untitled"),p.horStops&&($('<div class="scrollStopContainer centerAll"></div>').insertAfter(s),$(".scrollStopTitles").append('<div class="stopTitle onlyActive" style="font-weight: bold;"></div>')),p.addFinalStop&&($(".scrollStopContainer").append('<div class="finalStopCircle"></div>'),p.horOnlyActiveTitle||$(".scrollStopTitles").append('<div class="finalStopTitle">'+p.finalStopTitle+"</div>")),p.horMobile||(s.addClass("desktopOnly"),$(".scrollStopContainer").addClass("desktopOnly"),$(".scrollStopTitles").addClass("desktopOnly")),p.horMobileOnly&&(s.removeClass("desktopOnly").addClass("mobileOnly"),$(".scrollStopContainer").removeClass("desktopOnly").addClass("mobileOnly"),$(".scrollStopTitles").removeClass("desktopOnly").addClass("mobileOnly"))),p.verTracker){$("body").append('<div class="verticalScrollProgress"><div class="verticalScrollProgressContainer"><div class="verticalScrollProgressBar"></div></div></div>'),"right"==p.verPosition&&$(".verticalScrollProgress").addClass("right");var h=$(".verticalScrollProgress");p.verMobile||h.addClass("desktopOnly"),p.verMobileOnly&&h.removeClass("desktopOnly").addClass("mobileOnly"),p.verStops&&h.append('<div class="vertScrollStopContainer"></div>'),p.verTitles?h.append('<div class="vertScrollStopTitles"></div>'):h.addClass("untitled"),p.addFinalStop&&($(".vertScrollStopContainer").append('<div class="finalStopCircle"></div>'),$(".vertScrollStopTitles").append('<div class="finalStopTitle">'+p.finalStopTitle+"</div>"))}if("max"in document.createElement("progress")){var S=$(".scrollProgress");S.attr("max",r()),$(document).scroll(function(){c=p.trackViewport?$(window).scrollTop()+$(window).height():$(window).scrollTop(),i>=i.offset().top-e?($(window).resize(),S.attr("value",n())):S.attr("value","0")}),$(window).resize(function(){S.attr("max",r()).attr("value",n())})}else{var T,v,S=$("#ScrollProgressBar"),f=r(),g=function(){return T=n(),v=T/f*100,v>100&&(v=100),v+="%"},w=function(){S.css("width",g())};$(document).scroll(function(){c=p.trackViewport?$(window).scrollTop()+$(window).height():$(window).scrollTop(),c>=i.offset().top-e?($(window).resize(),S.css("width",g())):S.css("width","0%")}),$(window).resize(function(){w()})}var T,C,m=$(".verticalScrollProgressBar"),f=r(),y=function(){return T=n(),C=T/f*100,C>100&&(C=100),C+="%"},u=function(){m.css("height",y())};if($(document).scroll(function(){c=p.trackViewport?$(window).scrollTop()+$(window).height():$(window).scrollTop(),c>=i.offset().top-e?($(window).resize(),u()):m.css("height","0%"),$(window).width()<=p.mobileThreshold?(p.horTitles&&$(".scrollStopTitles").children(".onlyActive").addClass("ellipsis"),p.horOnlyActiveTitle||($(".scrollStopTitles").children(".stopTitle, .finalStopTitle").css("display","none"),$(".scrollStopTitles").children(".onlyActive").css("display","block"))):($(".scrollStopTitles").children(".stopTitle, .onlyActive").removeClass("ellipsis"),p.horOnlyActiveTitle?($(".scrollStopTitles").children(".stopTitle, .finalStopTitle").css("display","none"),$(".scrollStopTitles").children(".onlyActive").css("display","block")):($(".scrollStopTitles").children(".stopTitle, .finalStopTitle").css("display","block"),$(".scrollStopTitles").children(".onlyActive").css("display","none")))}),$(window).resize(function(){f=r(),u(),l(),$(window).width()<=p.mobileThreshold?($(".horizontalScrollProgress, .scrollProgress, .scrollProgressContainer, .scrollStopContainer, .scrollStopTitles, .verticalScrollProgress").addClass("smallDevice"),p.horOnlyActiveTitle||($(".scrollStopTitles").children(".stopTitle, .finalStopTitle").css("display","none"),$(".scrollStopTitles").children(".onlyActive").css("display","block"),p.horTitlesOffset||$(".scrollStopTitles").children(".onlyActive").css("margin-top","38px").css("margin-left","8px"))):($(".horizontalScrollProgress, .scrollProgress, .scrollProgressContainer, .scrollStopContainer, .scrollStopTitles, .verticalScrollProgress").removeClass("smallDevice"),p.horOnlyActiveTitle?($(".scrollStopTitles").children(".stopTitle, .finalStopTitle").css("display","none"),$(".scrollStopTitles").children(".onlyActive").css("display","block")):($(".scrollStopTitles").children(".stopTitle, .finalStopTitle").css("display","block"),$(".scrollStopTitles").children(".onlyActive").css("display","none")))}),o(),p.linking&&($(".stopCircle, .stopTitle").click(function(){t=p.skipHeadlines?$("#SectionHeadline"+$(this).attr("data-index")).offset().top+$("#SectionHeadline"+$(this).attr("data-index")).height():$(window).width()<=p.mobileThreshold&&p.horTitles?$("#SectionHeadline"+$(this).attr("data-index")).offset().top+$("#SectionHeadline"+$(this).attr("data-index")).height():$("#SectionHeadline"+$(this).attr("data-index")).offset().top+1,$("html, body").animate({scrollTop:t-e},p.scrollSpeed)}),$(".finalStopCircle, .finalStopTitle").click(function(){$("html, body").animate({scrollTop:i.offset().top+i.outerHeight()-$(window).height()/2},p.scrollSpeed)})),p.hovering){var k;$(".scrollStopContainer .stopCircle, .scrollStopTitles .stopTitle").hover(function(){k=$(this).attr("data-index"),$(".stopCircle, .stopTitle").removeClass("hover"),$(".scrollStopContainer .stop"+k+", .scrollStopTitles .stop"+k).addClass("hover")},function(){$(".stopCircle, .stopTitle").removeClass("hover")}),$(".vertScrollStopContainer .stopCircle, .vertScrollStopTitles .stopTitle").hover(function(){k=$(this).attr("data-index"),$(".stopCircle, .stopTitle").removeClass("hover"),$(".vertScrollStopContainer .stop"+k+", .vertScrollStopTitles .stop"+k).addClass("hover")},function(){$(".stopCircle, .stopTitle").removeClass("hover")}),$(".scrollStopContainer .finalStopCircle, .scrollStopTitles .finalStopTitle").hover(function(){$(".scrollStopContainer .finalStopCircle, .scrollStopTitles .finalStopTitle").addClass("hover")},function(){$(".finalStopCircle, .finalStopTitle").removeClass("hover")}),$(".vertScrollStopContainer .finalStopCircle, .vertScrollStopTitles .finalStopTitle").hover(function(){$(".vertScrollStopContainer .finalStopCircle, .vertScrollStopTitles .finalStopTitle").addClass("hover")},function(){$(".finalStopCircle, .finalStopTitle").removeClass("hover")})}$(document).scroll()})};