$.fn.progressTracker=function(a){let settings=$.extend({horTracker:true,horInHeader:false,horInContainer:false,horPosition:"top",horCenter:true,horStyle:"fill",horColor:"red",horMobile:true,horMobileOnly:false,horStops:true,horNumbering:true,horEqualSpacing:false,horSplitSections:false,horSide:"right",horTitles:true,horTitlesOffset:"bottom",horOnlyActiveTitle:true,verTracker:false,verInContainer:"",verPosition:"left",verStyle:"beam",verColor:"red",verMobile:false,verMobileOnly:false,verStops:true,verNumbering:false,verEqualSpacing:false,verTitles:true,mobileThreshold:1300,trackAllHeadlines:false,addFinalStop:false,finalStopTitle:"",hovering:true,linking:true,skipHeadlines:true,scrollSpeed:800,trackViewport:true,trackViewportOnly:false},a);let currentVersion="1.3a",copyrightYear="2016-2018",linkingScrollTop,head,trackedArea,horizontalTracker,getScrollProgressMax,getScrollProgressValue,trackerSize,headlineMargin,horizontalCenter,horizontalTop,horizontalBottom,horizontalTitlesHeight,scrollStopTitles;getScrollProgressMax=function(){return trackedArea.outerHeight()};if(settings.trackViewport||settings.trackViewportOnly){trackerSize=$(window).scrollTop()+$(window).height();getScrollProgressValue=function(){return $(window).scrollTop()+$(window).height()-trackedArea.offset().top}}else{trackerSize=$(window).scrollTop();getScrollProgressValue=function(){return $(window).scrollTop()-trackedArea.offset().top+head}}$(document).ready(function(){horizontalCenter=$(".spt-horizontalScrollProgress").outerHeight(true)-$(".spt-horizontalScrollProgress").height()+$(".spt-horizontalScrollProgress").children(":first-child").height()/2;horizontalTop=horizontalCenter-$(".spt-horizontalScrollProgress").children(":first-child").height()/2;horizontalBottom=horizontalCenter+$(".spt-horizontalScrollProgress").children(":first-child").height()/2;if(parseFloat($(".spt-centerAll").css("max-width"))>(settings.mobileThreshold-400)){$(".spt-centerAll").css("max-width",settings.mobileThreshold-400+"px")}if($(".spt-sectionTitle.spt-trackThis").length){let i=0;$(".spt-sectionTitle.spt-trackThis").each(function(){i++;$(this).removeClass("spt-trackThis").wrap('<div id="Section'+i+'" class="spt-trackThis"></div>');let nextBreak=false;while(!nextBreak){if($("#Section"+i).next().length){if($("#Section"+i).next()[0]!==$("#Section"+i).siblings(".spt-sectionTitle.spt-trackThis")[0]){$("#Section"+i).append($("#Section"+i).next())}else{nextBreak=true}}else{nextBreak=true}}})}if($("#TrackScrollProgress").length){trackedArea=$("#TrackScrollProgress")}else{trackedArea=$(document)}if(settings.trackAllHeadlines){trackedArea.find("h1, h2, h3, h4, h5, h6").addClass("spt-sectionTitle")}else{trackedArea.find("h3").addClass("spt-sectionTitle")}headlineMargin=(trackedArea.find(".spt-trackThis").children(".spt-sectionTitle:first").outerHeight(true)-trackedArea.find(".spt-trackThis").children(".spt-sectionTitle:first").outerHeight())/2;if(settings.horColor==="blue"||settings.verColor==="blue"){$("head").append('<link href="css/themes/spt-blue.min.css" rel="stylesheet" />')}if(settings.horColor==="green"||settings.verColor==="green"){$("head").append('<link href="css/themes/spt-green.min.css" rel="stylesheet" />')}if(settings.horColor==="orange"||settings.verColor==="orange"){$("head").append('<link href="css/themes/spt-orange.min.css" rel="stylesheet" />')}if(settings.horColor==="custom"||settings.verColor==="custom"){$("head").append('<link href="css/themes/spt-custom.css" rel="stylesheet" />')}if(settings.horTracker){if(settings.horMobile||settings.horMobileOnly||!settings.horSplitSections){if(settings.horInHeader&&$("header").length){if(settings.horInHeader==="bottom"){$("header").append('<div class="spt-horizontalScrollProgress"></div>')}else{$("header").prepend('<div class="spt-horizontalScrollProgress"></div>')}if(settings.horMobileOnly){$(".spt-horizontalScrollProgress").addClass("spt-mobileOnly")}head=$("header").outerHeight()}else{$("body").append('<div class="spt-horizontalScrollProgress spt-fixed"></div>');if(settings.horPosition==="bottom"){head=0}else{head=$(".spt-horizontalScrollProgress").outerHeight()}}if(!settings.trackViewportOnly&&"max" in document.createElement("progress")){$(".spt-horizontalScrollProgress").append('<progress class="spt-scrollProgress"></progress>');horizontalTracker=$(".spt-scrollProgress")}else{$(".spt-horizontalScrollProgress").append('<div class="spt-scrollProgressContainer"><span class="spt-scrollProgressBar"></span></div>');horizontalTracker=$(".spt-scrollProgressContainer")}if(settings.horPosition==="bottom"&&!settings.horInHeader){$(".spt-horizontalScrollProgress").addClass("spt-bottom");$("body").css("padding-bottom",$(".spt-horizontalScrollProgress").height())}else{if(!settings.horInHeader){$("body").css("padding-top",$(".spt-horizontalScrollProgress").height())}}if(horizontalTracker.length){horizontalTracker.attr("value","0")}if(settings.horTitles){$('<div class="spt-scrollStopTitles"></div>').insertAfter(horizontalTracker);scrollStopTitles=$(".spt-scrollStopTitles");scrollStopTitles.append('<div class="spt-stopTitle spt-onlyActive" style="font-weight: bold;"></div>')}else{horizontalTracker.addClass("spt-untitled")}if(settings.horStops){$('<div class="spt-scrollStopContainer"></div>').insertAfter(horizontalTracker)}if(settings.addFinalStop){$(".spt-scrollStopContainer").append('<div class="spt-finalStopCircle" title="'+settings.finalStopTitle+'"></div>');if(!settings.horOnlyActiveTitle){scrollStopTitles.append('<div class="spt-finalStopTitle">'+settings.finalStopTitle+"</div>")}}if(!settings.horMobile){$(".spt-horizontalScrollProgress").addClass("spt-desktopOnly")}if(settings.horMobileOnly){$(".spt-horizontalScrollProgress").removeClass("spt-desktopOnly").addClass("spt-mobileOnly")}if(settings.horStyle==="fill"){$(".spt-horizontalScrollProgress").addClass("spt-styleFill")}if(settings.horCenter){horizontalTracker.addClass("spt-centerAll");scrollStopTitles.addClass("spt-centerAll");$(".spt-scrollStopContainer").addClass("spt-centerAll")}}if(settings.horSplitSections&&!settings.horMobileOnly){$(".spt-horizontalScrollProgress").addClass("spt-mobileOnly");$("body").append('<div class="spt-splitSections spt-desktopOnly"></div>');horizontalTracker=$(".spt-splitSections");let i=0;$(".spt-trackThis").each(function(){i++;horizontalTracker.append('<div class="spt-sectionProgress" id="SectionProgress'+i+'"><div class="spt-sectionProgressBar"></div></div>')});if(settings.horStyle==="fill"){horizontalTracker.addClass("spt-styleFill")}}if(settings.horInContainer&&settings.horInContainer!==""){let horContainer=$("#"+settings.horInContainer);if(horContainer.length){horContainer.append(horizontalTracker);horizontalTracker.addClass("spt-inContainer")}else{let splitSectionsActive=" ";if(settings.horSplitSections){splitSectionsActive=' and "horSide" '}console.log('The setting "horInContainer" is currently used with the id "'+settings.horInContainer+'", however no element with that id could be found in your layout. The default layout with "horPosition"'+splitSectionsActive+"is applied instead.");if(settings.horPosition==="bottom"){horizontalTracker.addClass("spt-bottom")}if(settings.horSide==="right"){horizontalTracker.addClass("spt-right")}}}else{if(settings.horPosition==="bottom"){horizontalTracker.addClass("spt-bottom")}if(settings.horSide==="right"){horizontalTracker.addClass("spt-right")}}if(settings.linking){horizontalTracker.addClass("spt-linking")}if(settings.horColor==="blue"){$(".spt-horizontalScrollProgress, .spt-splitSections").addClass("spt-blue")}else{if(settings.horColor==="green"){$(".spt-horizontalScrollProgress, .spt-splitSections").addClass("spt-green")}else{if(settings.horColor==="orange"){$(".spt-horizontalScrollProgress, .spt-splitSections").addClass("spt-orange")}else{if(settings.horColor==="custom"){$(".spt-horizontalScrollProgress, .spt-splitSections").addClass("spt-custom")}}}}}if(settings.verTracker){$("body").append('<div class="spt-verticalScrollProgress"><div class="spt-verticalScrollProgressContainer"><div class="spt-verticalScrollProgressBar"></div></div></div>');let verticalTracker=$(".spt-verticalScrollProgress");if(!settings.verMobile){verticalTracker.addClass("spt-desktopOnly")}if(settings.verMobileOnly){verticalTracker.removeClass("spt-desktopOnly").addClass("spt-mobileOnly")}if(settings.verStops){verticalTracker.append('<div class="spt-verScrollStopContainer"></div>')}if(settings.verTitles){verticalTracker.append('<div class="spt-verScrollStopTitles"></div>')}else{verticalTracker.addClass("spt-untitled")}if(settings.addFinalStop){$(".spt-verScrollStopContainer").append('<div class="spt-finalStopCircle"></div>');$(".spt-verScrollStopTitles").append('<div class="spt-finalStopTitle">'+settings.finalStopTitle+"</div>")}if(settings.verStyle==="fill"){verticalTracker.addClass("spt-styleFill")}if(settings.verInContainer&&settings.verInContainer!==""){let verContainer=$("#"+settings.verInContainer);if(verContainer.length){verContainer.append(verticalTracker);verticalTracker.addClass("spt-inContainer")}else{console.log('The setting "verInContainer" is currently used with the id "'+settings.verInContainer+'", however no element with that id could be found in your layout. The default layout with "verPosition" is applied instead.');if(settings.verPosition==="right"){verticalTracker.addClass("spt-verRight")}}}else{if(settings.verPosition==="right"){verticalTracker.addClass("spt-verRight")}}if(settings.linking){verticalTracker.addClass("spt-linking")}if(settings.verColor==="blue"){verticalTracker.addClass("spt-blue")}else{if(settings.verColor==="green"){verticalTracker.addClass("spt-green")}else{if(settings.verColor==="orange"){verticalTracker.addClass("spt-orange")}else{if(settings.verColor==="custom"){verticalTracker.addClass("spt-custom")}}}}}if($(".spt-scrollProgress").length){let scrollProgress=$(".spt-scrollProgress");scrollProgress.attr("max",getScrollProgressMax());$(document).scroll(function(){if(trackedArea>=trackedArea.offset().top-head){$(window).resize();scrollProgress.attr("value",getScrollProgressValue())}else{scrollProgress.attr("value","0")}});$(window).resize(function(){scrollProgress.attr("max",getScrollProgressMax()).attr("value",getScrollProgressValue())})}else{let scrollProgress=$(".spt-scrollProgressBar"),scrollProgressMax=getScrollProgressMax(),scrollProgressValue,scrollProgressWidth,scrollProgressLeft,getScrollProgressWidth=function(){scrollProgressValue=getScrollProgressValue();if(!settings.trackViewportOnly){scrollProgressWidth=(scrollProgressValue/scrollProgressMax)*100}else{scrollProgressWidth=((trackerSize)/scrollProgressMax)*100}if(scrollProgressWidth>100){scrollProgressWidth=100}else{if(scrollProgressWidth<0){scrollProgressWidth=0}}scrollProgressWidth=scrollProgressWidth+"%";return scrollProgressWidth},setScrollProgressWidth=function(){scrollProgress.css("width",getScrollProgressWidth())},getScrollProgressLeft=function(){scrollProgressLeft=(($(window).scrollTop()-head)/scrollProgressMax)*100;if(scrollProgressLeft>100){scrollProgressLeft=100}scrollProgressLeft=scrollProgressLeft+"%";return scrollProgressLeft},setScrollProgressLeft=function(){scrollProgress.css("left",getScrollProgressLeft())};$(document).scroll(function(){if(trackerSize>=trackedArea.offset().top-head){$(window).resize();scrollProgress.css("width",getScrollProgressWidth())}else{scrollProgress.css("width","0")}});$(window).resize(function(){setScrollProgressWidth();if(settings.trackViewportOnly){setScrollProgressLeft()}})}let verticalScrollProgress=$(".spt-verticalScrollProgressBar"),scrollProgressMax=getScrollProgressMax(),scrollProgressValue,scrollProgressHeight,scrollProgressTop,getScrollProgressHeight=function(){scrollProgressValue=getScrollProgressValue();if(!settings.trackViewportOnly){scrollProgressHeight=(scrollProgressValue/scrollProgressMax)*100}else{scrollProgressHeight=($(window).height()/scrollProgressMax)*100}if(scrollProgressHeight>100){scrollProgressHeight=100}scrollProgressHeight=scrollProgressHeight+"%";return scrollProgressHeight},setScrollProgressHeight=function(){verticalScrollProgress.css("height",getScrollProgressHeight())},getScrollProgressTop=function(){scrollProgressTop=(($(window).scrollTop()-head)/scrollProgressMax)*100;if(scrollProgressTop>100){scrollProgressTop=100}scrollProgressTop=scrollProgressTop+"%";return scrollProgressTop},setScrollProgressTop=function(){verticalScrollProgress.css("top",getScrollProgressTop())};$(document).scroll(function(){if(trackerSize>=trackedArea.offset().top-head){$(window).resize()}else{verticalScrollProgress.css("height","0%")}if($(window).width()<=settings.mobileThreshold){if(settings.horTitles){scrollStopTitles.children(".spt-onlyActive").addClass("spt-ellipsis")}if(!settings.horOnlyActiveTitle){scrollStopTitles.children(".spt-stopTitle, .spt-finalStopTitle").css("display","none");scrollStopTitles.children(".spt-onlyActive").css("display","block")}}else{scrollStopTitles.children(".spt-stopTitle, .spt-onlyActive").removeClass("spt-ellipsis");if(settings.horOnlyActiveTitle){scrollStopTitles.children(".spt-stopTitle, .spt-finalStopTitle").css("display","none");scrollStopTitles.children(".spt-onlyActive").css("display","block")}else{scrollStopTitles.children(".spt-stopTitle, .spt-finalStopTitle").css("display","block");scrollStopTitles.children(".spt-onlyActive").css("display","none")}}b()});$(window).resize(function(){horizontalCenter=$(".spt-horizontalScrollProgress").outerHeight(true)-$(".spt-horizontalScrollProgress").height()+$(".spt-horizontalScrollProgress").children(":first-child").height()/2;horizontalTop=horizontalCenter-$(".spt-horizontalScrollProgress").children(":first-child").height()/2;horizontalBottom=horizontalCenter+$(".spt-horizontalScrollProgress").children(":first-child").height()/2;scrollStopTitles.append('<div class="spt-placeholder">&nbsp;</div>');horizontalTitlesHeight=parseFloat($(".spt-placeholder").height());$(".spt-placeholder").remove();scrollProgressMax=getScrollProgressMax();setScrollProgressHeight();if(settings.trackViewportOnly){setScrollProgressTop()}if($(window).width()<=settings.mobileThreshold){$(".spt-horizontalScrollProgress, .spt-scrollProgress, .spt-scrollProgressContainer, .spt-scrollStopContainer, .spt-scrollStopTitles, .spt-verticalScrollProgress, .spt-splitSections").addClass("spt-smallDevice");if(!settings.horOnlyActiveTitle){scrollStopTitles.children(".spt-stopTitle, .spt-finalStopTitle").css("display","none");scrollStopTitles.children(".spt-onlyActive").css("display","block")}if(!settings.horTitlesOffset){scrollStopTitles.children(".spt-onlyActive").css("margin-top",horizontalBottom+5+"px").css("margin-left","8px")}if(settings.horTracker&&settings.horMobile||settings.horTracker&&settings.horMobileOnly){head=$(".spt-horizontalScrollProgress").outerHeight()}else{head=0}}else{$(".spt-horizontalScrollProgress, .spt-scrollProgress, .spt-scrollProgressContainer, .spt-scrollStopContainer, .spt-scrollStopTitles, .spt-verticalScrollProgress, .spt-splitSections").removeClass("spt-smallDevice");if(settings.horOnlyActiveTitle){scrollStopTitles.children(".spt-stopTitle, .spt-finalStopTitle").css("display","none");scrollStopTitles.children(".spt-onlyActive").css("display","block")}else{scrollStopTitles.children(".spt-stopTitle, .spt-finalStopTitle").css("display","block");scrollStopTitles.children(".spt-onlyActive").css("display","none")}if(settings.horTracker&&!settings.horMobileOnly&&!settings.horSplitSections){head=$(".spt-horizontalScrollProgress").outerHeight()}else{head=0}}if($(window).width()>=(settings.mobileThreshold+100)){$(".spt-verticalScrollProgress").css("width",180+($(window).width()-settings.mobileThreshold)/2-50+"px");$(".spt-verScrollStopTitles").css("width",170+($(window).width()-settings.mobileThreshold)/2-50+"px")}else{$(".spt-verticalScrollProgress").css("width","180px");$(".spt-verScrollStopTitles").css("width","170px")}b()});c();function c(){trackedArea.find(".spt-trackThis").each(function(d){let section=$(this),sectionHeadline=section.children(".spt-sectionTitle:first"),sectionTitle,sectionId=d+1,scrollHorStops=$(".spt-scrollStopContainer"),scrollVerStops=$(".spt-verScrollStopContainer"),scrollVerStopTitles=$(".spt-verScrollStopTitles");if(sectionHeadline.attr("data-name")){sectionTitle=sectionHeadline.attr("data-name")}else{sectionTitle=sectionHeadline.text()}section.attr("id","Section"+sectionId);section.children(".spt-sectionTitle:first").attr({id:"SectionHeadline"+sectionId});scrollHorStops.append('<div class="spt-stopCircle spt-stop'+sectionId+'" data-index="'+sectionId+'" title="'+sectionHeadline.text()+'"></div>');scrollVerStops.append('<div class="spt-stopCircle spt-stop'+sectionId+'" data-index="'+sectionId+'"></div>');scrollStopTitles.append('<div class="spt-stopTitle spt-stop'+sectionId+'" data-index="'+sectionId+'">'+sectionTitle+"</div>");scrollVerStopTitles.append('<div class="spt-stopTitle spt-stop'+sectionId+'" data-index="'+sectionId+'">'+sectionTitle+"</div>");$("#SectionProgress"+sectionId).append('<div class="spt-stopTitle spt-stop'+sectionId+'" data-index="'+sectionId+'">'+sectionTitle+"</div>");if(settings.horNumbering){scrollHorStops.children(".spt-stopCircle.spt-stop"+sectionId).append(sectionId);if(settings.addFinalStop){let numStops=scrollHorStops.children(".spt-stopCircle").length+1;scrollHorStops.children(".spt-finalStopCircle").text(numStops)}}if(settings.verNumbering){scrollVerStops.children(".spt-stopCircle.spt-stop"+sectionId).append(sectionId);if(settings.addFinalStop){let numStops=scrollVerStops.children(".spt-stopCircle").length+1;scrollVerStops.children(".spt-finalStopCircle").text(numStops)}}});$(".spt-scrollStopContainer").append($(".spt-scrollStopContainer > .spt-finalStopCircle"));$(window).resize()}if(settings.linking){$(".spt-stopCircle, .spt-stopTitle").click(function(){if($("#SectionHeadline"+$(this).attr("data-index")).length){if(settings.skipHeadlines||$(window).width()<=settings.mobileThreshold&&settings.horTitles){linkingScrollTop=$("#SectionHeadline"+$(this).attr("data-index")).offset().top+$("#SectionHeadline"+$(this).attr("data-index")).height()-head+1}else{linkingScrollTop=$("#SectionHeadline"+$(this).attr("data-index")).offset().top-parseFloat($("#SectionHeadline"+$(this).attr("data-index")).css("margin-top"))-head+1}}else{linkingScrollTop=$("#Section"+$(this).attr("data-index")).offset().top-head-2}$("html, body").animate({scrollTop:linkingScrollTop},settings.scrollSpeed)});$(".spt-finalStopCircle, .spt-finalStopTitle").click(function(){if(trackedArea.children(":last-child").children(":first-child").is(".spt-sectionTitle")){if(settings.skipHeadlines||$(window).width()<=settings.mobileThreshold&&settings.horTitles){linkingScrollTop=trackedArea.children(":last-child").children(":first-child").offset().top+trackedArea.children(":last-child").children(":first-child").height()-head+1}else{linkingScrollTop=trackedArea.children(":last-child").children(":first-child").offset().top-parseFloat(trackedArea.children(":last-child").children(":first-child").css("margin-top"))-head+1}}else{linkingScrollTop=trackedArea.children(":last-child").offset().top-head-2}$("html, body").animate({scrollTop:linkingScrollTop},settings.scrollSpeed)})}if(settings.hovering){let itemIndex;$(".spt-scrollStopContainer .spt-stopCircle, .spt-scrollStopTitles .spt-stopTitle").hover(function(){itemIndex=$(this).attr("data-index");$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover");$(".spt-scrollStopContainer .spt-stop"+itemIndex+", .spt-scrollStopTitles .spt-stop"+itemIndex).addClass("spt-hover")},function(){$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover")});$(".spt-verScrollStopContainer .spt-stopCircle, .spt-verScrollStopTitles .spt-stopTitle").hover(function(){itemIndex=$(this).attr("data-index");$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover");$(".spt-verScrollStopContainer .spt-stop"+itemIndex+", .spt-verScrollStopTitles .spt-stop"+itemIndex).addClass("spt-hover")},function(){$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover")});$(".spt-scrollStopContainer .spt-finalStopCircle, .spt-scrollStopTitles .spt-finalStopTitle").hover(function(){$(".spt-scrollStopContainer .spt-finalStopCircle, .spt-scrollStopTitles .spt-finalStopTitle").addClass("spt-hover")},function(){$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-hover")});$(".spt-verScrollStopContainer .spt-finalStopCircle, .spt-verScrollStopTitles .spt-finalStopTitle").hover(function(){$(".spt-verScrollStopContainer .spt-finalStopCircle, .spt-verScrollStopTitles .spt-finalStopTitle").addClass("spt-hover")},function(){$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-hover")})}$(document).scroll();console.log("Advanced jQuery Scroll Progress Tracker v"+currentVersion+"\n(c) "+copyrightYear+" David Whitworth (david@whitworth.de)")});function b(){trackedArea.find(".spt-trackThis").each(function(c){let section=$(this),sectionHeadline=section.children(".spt-sectionTitle:first"),sectionTitle=sectionHeadline.text(),sectionTopSubtract=trackedArea.offset().top,sectionRelativeTop=section.offset().top-sectionTopSubtract,sectionId=c+1,sectionStop=(sectionRelativeTop/getScrollProgressMax())*100,scrollHorStops=$(".spt-scrollStopContainer"),scrollVerStops=$(".spt-verScrollStopContainer"),scrollStopTitles=$(".spt-scrollStopTitles"),scrollVerStopTitles=$(".spt-verScrollStopTitles"),sectionProgressWidth,sectionProgressLeft;if(sectionStop>100){sectionStop=100}if(settings.trackViewport||settings.trackViewportOnly){trackerSize=$(window).scrollTop()+$(window).height()}else{trackerSize=$(window).scrollTop()}let bar=$("#SectionProgress"+sectionId+" .spt-sectionProgressBar");if(!settings.trackViewportOnly){sectionProgressWidth=(trackerSize-section.offset().top)/section.height()*100;if(sectionProgressWidth>100){sectionProgressWidth=100}}else{sectionProgressWidth=$(window).height()/section.height()*100;sectionProgressLeft=(trackerSize-section.offset().top)/section.height()*100-sectionProgressWidth;if(sectionProgressLeft>100){bar.css("left","100%")}else{bar.css("left",sectionProgressLeft+"%");if(sectionId===1&&sectionProgressLeft<0){bar.css("left","0")}}}bar.css("width",sectionProgressWidth+"%");scrollHorStops.children(".spt-stop"+sectionId).css("left",sectionStop+"%");scrollVerStops.children(".spt-stop"+sectionId).css("top",sectionStop+"%");scrollStopTitles.children(".spt-stop"+sectionId).css("left",sectionStop+"%");scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").addClass("spt-reached");if(settings.horStyle==="beam"){scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").css("left","-8px")}else{scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").css("left","0")}scrollVerStopTitles.children(".spt-stop"+sectionId).css("top",sectionStop+"%");if($(window).scrollTop()<=trackedArea.find(".spt-trackThis:first").offset().top+trackedArea.find(".spt-trackThis:first").children(".spt-sectionTitle:first").outerHeight()-head){scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").text("")}if($(window).scrollTop()>=section.offset().top+section.children(".spt-sectionTitle:first").outerHeight()-head){scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").text(sectionTitle);if(settings.finalStopTitle!==""){if($(window).width()<=settings.mobileThreshold){if(($(window).scrollTop()+$(window).height())>=(trackedArea.offset().top+trackedArea.height()+(headlineMargin*2))||($(window).scrollTop()+$(window).height())>=trackedArea.outerHeight()){scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").text(settings.finalStopTitle)}}else{if(($(window).scrollTop()+$(window).height())>=trackedArea.outerHeight()){scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").text(settings.finalStopTitle)}}}}if(settings.horOnlyActiveTitle){scrollStopTitles.children(".spt-stop"+sectionId).css("display","none");scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").css("display","block")}else{scrollStopTitles.children(".spt-stop"+sectionId).css("display","block");scrollStopTitles.children(".spt-stopTitle.spt-onlyActive").css("display","none")}if(settings.horTitlesOffset==="top"){scrollStopTitles.children(".spt-stopTitle").css("margin-top",horizontalTop-horizontalTitlesHeight-5+"px").css("margin-left","8px")}else{if(settings.horTitlesOffset==="bottom"){scrollStopTitles.children(".spt-stopTitle").css("margin-top",horizontalBottom+5+"px").css("margin-left","8px");scrollStopTitles.children(".spt-finalStopTitle").css("margin-top",horizontalBottom+5+"px")}else{scrollStopTitles.children(".spt-stopTitle").css("margin-top",horizontalCenter-horizontalTitlesHeight/2-2+"px").css("margin-left","25px");scrollStopTitles.children(".spt-finalStopTitle").css("margin-top",horizontalCenter-horizontalTitlesHeight/2-2+"px").css("margin-right","16px")}}if(settings.horStyle==="fill"){scrollStopTitles.children(".spt-onlyActive").css("margin-top","0")}if(getScrollProgressValue()>=sectionRelativeTop){$(".spt-stop"+sectionId).addClass("spt-reached")}else{$(".spt-stop"+sectionId).removeClass("spt-reached")}if(getScrollProgressValue()>=getScrollProgressMax()){$(".spt-finalStopCircle, .spt-finalStopTitle").addClass("spt-reached")}else{$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-reached")}if(settings.trackViewportOnly){if(getScrollProgressValue()-$(window).outerHeight()>=sectionRelativeTop+section.outerHeight()){$(".spt-stop"+sectionId).removeClass("spt-reached")}}})}};