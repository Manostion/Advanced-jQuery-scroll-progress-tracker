$.fn.progressTracker=function(t){function s(){e.find(".spt-trackThis").each(function(t){var s=$(this),l=s.children(".spt-sectionTitle"),i=l.text(),n=(e.offset().top,s.offset().top-e.offset().top),d=t+1,h=n/r()*100,S=$(".spt-scrollStopContainer"),v=$(".spt-vertScrollStopContainer"),T=$(".spt-scrollStopTitles"),f=$(".spt-vertScrollStopTitles");if(h>100&&(h=100),S.children(".spt-stop"+d).css("left",h+"%"),v.children(".spt-stop"+d).css("top",h+"%"),T.children(".spt-stop"+d).css("left",h+"%"),T.children(".spt-stopTitle.spt-onlyActive").addClass("spt-reached"),"beam"==a.horStyle?T.children(".spt-stopTitle.spt-onlyActive").css("left","-8px"):T.children(".spt-stopTitle.spt-onlyActive").css("left","0"),f.children(".spt-stop"+d).css("top",h+"%"),$(window).scrollTop()<=e.find(".spt-trackThis:first").offset().top+e.find(".spt-trackThis:first").children(".spt-sectionTitle").outerHeight()-o&&T.children(".spt-stopTitle.spt-onlyActive").text(""),$(window).scrollTop()>=s.offset().top+s.children(".spt-sectionTitle").outerHeight()-o){T.children(".spt-stopTitle.spt-onlyActive").text(i);$(window).scrollTop()+$(window).height();""!=a.finalStopTitle&&($(window).width()<=a.mobileThreshold?($(window).scrollTop()+$(window).height()>=e.offset().top+e.height()+2*c||$(window).scrollTop()+$(window).height()>=$(document).outerHeight())&&T.children(".spt-stopTitle.spt-onlyActive").text(a.finalStopTitle):$(window).scrollTop()+$(window).height()>=$(document).outerHeight()&&T.children(".spt-stopTitle.spt-onlyActive").text(a.finalStopTitle))}a.horOnlyActiveTitle?(T.children(".spt-stop"+d).css("display","none"),T.children(".spt-stopTitle.spt-onlyActive").css("display","block")):(T.children(".spt-stop"+d).css("display","block"),T.children(".spt-stopTitle.spt-onlyActive").css("display","none")),"top"==a.horTitlesOffset?T.children(".spt-stopTitle").css("margin-left","8px"):"bottom"==a.horTitlesOffset?(T.children(".spt-stopTitle").css("margin-top","38px").css("margin-left","8px"),T.children(".spt-finalStopTitle").css("margin-top","38px")):(T.children(".spt-stopTitle").css("margin-top","18px").css("margin-left","25px"),T.children(".spt-finalStopTitle").css("margin-top","18px").css("margin-right","16px")),"fill"==a.horStyle&&T.children(".spt-onlyActive").css("margin-top","0"),p()>=n?$(".spt-stop"+d).addClass("spt-reached"):$(".spt-stop"+d).removeClass("spt-reached"),p()>=r()?$(".spt-finalStopCircle, .spt-finalStopTitle").addClass("spt-reached"):$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-reached")})}var l,o,e,i,r,p,n,c,a=$.extend({horTracker:!0,horInHeader:!1,horPosition:"top",horCenter:!0,horStyle:"fill",horMobile:!0,horMobileOnly:!1,horStops:!0,horNumbering:!0,horTitles:!1,horTitlesOffset:"bottom",horOnlyActiveTitle:!0,verTracker:!1,verPosition:"left",verStyle:"beam",verMobile:!1,verMobileOnly:!1,verStops:!0,verNumbering:!1,verTitles:!0,mobileThreshold:1300,trackAllHeadlines:!1,addFinalStop:!1,finalStopTitle:"",hovering:!0,linking:!0,skipHeadlines:!1,scrollSpeed:800,trackViewport:!0,trackViewportOnly:!1},t);r=function(){return e.outerHeight()},a.trackViewport?(n=$(window).scrollTop()+$(window).height(),p=function(){return $(window).scrollTop()+$(window).height()-e.offset().top}):(n=$(window).scrollTop(),p=function(){return $(window).scrollTop()-e.offset().top+o}),$(document).ready(function(){function t(){e.find(".spt-trackThis").each(function(t){var s,l=$(this).children(".spt-sectionTitle"),o=t+1,e=$(".spt-scrollStopContainer"),i=$(".spt-vertScrollStopContainer"),r=$(".spt-scrollStopTitles"),p=$(".spt-vertScrollStopTitles");if(s=l.attr("data-name")?l.attr("data-name"):l.text(),$(this).attr("id","Section"+o),$(this).children(".spt-sectionTitle").attr({id:"SectionHeadline"+o}),e.append('<div class="spt-stopCircle spt-stop'+o+'" data-index="'+o+'" title="'+l.text()+'"></div>'),i.append('<div class="spt-stopCircle spt-stop'+o+'" data-index="'+o+'"></div>'),r.append('<div class="spt-stopTitle spt-stop'+o+'" data-index="'+o+'">'+s+"</div>"),p.append('<div class="spt-stopTitle spt-stop'+o+'" data-index="'+o+'">'+s+"</div>"),a.horNumbering&&(e.children(".spt-stopCircle.spt-stop"+o).append(o),a.addFinalStop)){var n=e.children(".spt-stopCircle").length+1;e.children(".spt-finalStopCircle").text(n)}if(a.verNumbering&&(i.children(".spt-stopCircle.spt-stop"+o).append(o),a.addFinalStop)){var n=i.children(".spt-stopCircle").length+1;i.children(".spt-finalStopCircle").text(n)}}),$(".spt-scrollStopContainer").append($(".spt-scrollStopContainer > .spt-finalStopCircle")),$(window).resize()}if(a.trackAllHeadlines?$("h1, h2, h3, h4, h5, h6").addClass("spt-sectionTitle"):$("h3").addClass("spt-sectionTitle"),$(".spt-sectionTitle.spt-trackThis").length){var d=0;$(".spt-sectionTitle.spt-trackThis").each(function(){d++,$(this).removeClass("spt-trackThis").wrap('<div id="Section'+d+'" class="spt-trackThis"></div>');for(var t=!1;!t;)$("#Section"+d).next().length&&$("#Section"+d).next()[0]!=$("#Section"+d).siblings(".spt-sectionTitle.spt-trackThis")[0]?$("#Section"+d).append($("#Section"+d).next()):t=!0})}if(e=$("#TrackScrollProgress").length?$("#TrackScrollProgress"):$(document),c=(e.find(".spt-trackThis").children(".spt-sectionTitle:first").outerHeight(!0)-e.find(".spt-trackThis").children(".spt-sectionTitle:first").outerHeight())/2,e.find(".spt-trackThis:first").children(".spt-sectionTitle").css("margin-top","0"),a.horTracker&&(a.horInHeader&&$("header").length?("bottom"==a.horInHeader?$("header").append('<div class="spt-horizontalScrollProgress"></div>'):$("header").prepend('<div class="spt-horizontalScrollProgress"></div>'),a.horMobileOnly&&$(".spt-horizontalScrollProgress").addClass("spt-mobileOnly"),o=$("header").outerHeight()):($("body").append('<div class="spt-horizontalScrollProgress spt-fixed"></div>'),o="bottom"==a.horPosition?0:$(".spt-horizontalScrollProgress").height()),"max"in document.createElement("progress")?($(".spt-horizontalScrollProgress").append('<progress class="spt-scrollProgress"></progress>'),i=$(".spt-scrollProgress")):($(".spt-horizontalScrollProgress").append('<div class="spt-scrollProgressContainer"><span class="spt-scrollProgressBar"></span></div>'),i=$(".spt-scrollProgressContainer")),"bottom"!=a.horPosition||a.horInHeader?a.horInHeader||$("body").css("padding-top",$(".spt-horizontalScrollProgress").height()):($(".spt-horizontalScrollProgress").addClass("spt-bottom"),$("body").css("padding-bottom",$(".spt-horizontalScrollProgress").height()))),a.horTracker&&($(".spt-scrollProgress").length&&$(".spt-scrollProgress").attr("value","0"),a.horTitles?($('<div class="spt-scrollStopTitles"></div>').insertAfter(i),$(".spt-scrollStopTitles").append('<div class="spt-stopTitle spt-onlyActive" style="font-weight: bold;"></div>')):i.addClass("spt-untitled"),a.horStops&&$('<div class="spt-scrollStopContainer"></div>').insertAfter(i),a.addFinalStop&&($(".spt-scrollStopContainer").append('<div class="spt-finalStopCircle" title="'+a.finalStopTitle+'"></div>'),a.horOnlyActiveTitle||$(".spt-scrollStopTitles").append('<div class="spt-finalStopTitle">'+a.finalStopTitle+"</div>")),a.horMobile||(i.addClass("spt-desktopOnly"),$(".spt-scrollStopContainer").addClass("spt-desktopOnly"),$(".spt-scrollStopTitles").addClass("spt-desktopOnly")),a.horMobileOnly&&(i.removeClass("spt-desktopOnly").addClass("spt-mobileOnly"),$(".spt-scrollStopContainer").removeClass("spt-desktopOnly").addClass("spt-mobileOnly"),$(".spt-scrollStopTitles").removeClass("spt-desktopOnly").addClass("spt-mobileOnly")),"fill"==a.horStyle&&$(".spt-horizontalScrollProgress").addClass("spt-styleFill"),a.horCenter&&(i.addClass("spt-centerAll"),$(".spt-scrollStopTitles").addClass("spt-centerAll"),$(".spt-scrollStopContainer").addClass("spt-centerAll"))),a.verTracker){$("body").append('<div class="spt-verticalScrollProgress"><div class="spt-verticalScrollProgressContainer"><div class="spt-verticalScrollProgressBar"></div></div></div>'),"right"==a.verPosition&&$(".spt-verticalScrollProgress").addClass("spt-verRight");var h=$(".spt-verticalScrollProgress");a.verMobile||h.addClass("spt-desktopOnly"),a.verMobileOnly&&h.removeClass("spt-desktopOnly").addClass("spt-mobileOnly"),a.verStops&&h.append('<div class="spt-vertScrollStopContainer"></div>'),a.verTitles?h.append('<div class="spt-vertScrollStopTitles"></div>'):h.addClass("spt-untitled"),a.addFinalStop&&($(".spt-vertScrollStopContainer").append('<div class="spt-finalStopCircle"></div>'),$(".spt-vertScrollStopTitles").append('<div class="spt-finalStopTitle">'+a.finalStopTitle+"</div>")),"fill"==a.verStyle&&$(".spt-verticalScrollProgress").addClass("spt-styleFill")}if($(".spt-scrollProgress").length){var S=$(".spt-scrollProgress");S.attr("max",r()),$(document).scroll(function(){n=a.trackViewport?$(window).scrollTop()+$(window).height():$(window).scrollTop(),e>=e.offset().top-o?($(window).resize(),S.attr("value",p())):S.attr("value","0")}),$(window).resize(function(){S.attr("max",r()).attr("value",p())})}else{var v,T,S=$(".spt-scrollProgressBar"),f=r(),g=function(){return v=p(),T=v/f*100,T>100&&(T=100),T+="%"},C=function(){S.css("width",g())};$(document).scroll(function(){n=a.trackViewport?$(window).scrollTop()+$(window).height():$(window).scrollTop(),n>=e.offset().top-o?($(window).resize(),S.css("width",g())):S.css("width","0%")}),$(window).resize(function(){C()})}var v,w,y=$(".spt-verticalScrollProgressBar"),f=r(),m=function(){return v=p(),w=v/f*100,w>100&&(w=100),w+="%"},u=function(){y.css("height",m())};if($(document).scroll(function(){n=a.trackViewport?$(window).scrollTop()+$(window).height():$(window).scrollTop(),n>=e.offset().top-o?($(window).resize(),u()):y.css("height","0%"),$(window).width()<=a.mobileThreshold?(a.horTitles&&$(".spt-scrollStopTitles").children(".spt-onlyActive").addClass("spt-ellipsis"),a.horOnlyActiveTitle||($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block"))):($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-onlyActive").removeClass("spt-ellipsis"),a.horOnlyActiveTitle?($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block")):($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","block"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","none")))}),$(window).resize(function(){f=r(),u(),s(),$(window).width()<=a.mobileThreshold?($(".spt-horizontalScrollProgress, .spt-scrollProgress, .spt-scrollProgressContainer, .spt-scrollStopContainer, .spt-scrollStopTitles, .spt-verticalScrollProgress").addClass("spt-smallDevice"),a.horOnlyActiveTitle||($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block"),a.horTitlesOffset||$(".spt-scrollStopTitles").children(".spt-onlyActive").css("margin-top","38px").css("margin-left","8px"))):($(".spt-horizontalScrollProgress, .spt-scrollProgress, .spt-scrollProgressContainer, .spt-scrollStopContainer, .spt-scrollStopTitles, .spt-verticalScrollProgress").removeClass("spt-smallDevice"),a.horOnlyActiveTitle?($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block")):($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","block"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","none"))),$(window).width()>=a.mobileThreshold+100?"right"==a.verPosition?$(".spt-verticalScrollProgress").css("right","50px"):$(".spt-verticalScrollProgress").css("left","50px"):"right"==a.verPosition?$(".spt-verticalScrollProgress").css("right","0"):$(".spt-verticalScrollProgress").css("left","0")}),t(),a.linking&&($(".spt-stopCircle, .spt-stopTitle").click(function(){l=a.skipHeadlines?$("#SectionHeadline"+$(this).attr("data-index")).offset().top+$("#SectionHeadline"+$(this).attr("data-index")).height():$(window).width()<=a.mobileThreshold&&a.horTitles?$("#SectionHeadline"+$(this).attr("data-index")).offset().top+$("#SectionHeadline"+$(this).attr("data-index")).height():$("#SectionHeadline"+$(this).attr("data-index")).offset().top+parseFloat($("#SectionHeadline"+$(this).attr("data-index")).css("margin-top"))-o,$("html, body").animate({scrollTop:l-o+1},a.scrollSpeed)}),$(".spt-finalStopCircle, .spt-finalStopTitle").click(function(){$("html, body").animate({scrollTop:e.offset().top+e.outerHeight()-$(window).height()/2},a.scrollSpeed)})),a.hovering){var k;$(".spt-scrollStopContainer .spt-stopCircle, .spt-scrollStopTitles .spt-stopTitle").hover(function(){k=$(this).attr("data-index"),$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover"),$(".spt-scrollStopContainer .spt-stop"+k+", .spt-scrollStopTitles .spt-stop"+k).addClass("spt-hover")},function(){$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover")}),$(".spt-vertScrollStopContainer .spt-stopCircle, .spt-vertScrollStopTitles .spt-stopTitle").hover(function(){k=$(this).attr("data-index"),$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover"),$(".spt-vertScrollStopContainer .spt-stop"+k+", .spt-vertScrollStopTitles .spt-stop"+k).addClass("spt-hover")},function(){$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover")}),$(".spt-scrollStopContainer .spt-finalStopCircle, .spt-scrollStopTitles .spt-finalStopTitle").hover(function(){$(".spt-scrollStopContainer .spt-finalStopCircle, .spt-scrollStopTitles .spt-finalStopTitle").addClass("spt-hover")},function(){$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-hover")}),$(".spt-vertScrollStopContainer .spt-finalStopCircle, .spt-vertScrollStopTitles .spt-finalStopTitle").hover(function(){$(".spt-vertScrollStopContainer .spt-finalStopCircle, .spt-vertScrollStopTitles .spt-finalStopTitle").addClass("spt-hover")},function(){$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-hover")})}$(document).scroll(),console.log(r())})};
