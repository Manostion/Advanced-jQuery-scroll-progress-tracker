$.fn.progressTracker=function(t){function s(){e.find(".spt-trackThis").each(function(t){var s=$(this),l=s.children(".spt-sectionTitle:first"),r=l.text(),n=(e.offset().top,s.offset().top-e.offset().top),f=t+1,T=n/i()*100,g=$(".spt-scrollStopContainer"),C=$(".spt-vertScrollStopContainer"),w=$(".spt-scrollStopTitles"),m=$(".spt-vertScrollStopTitles");if(T>100&&(T=100),g.children(".spt-stop"+f).css("left",T+"%"),C.children(".spt-stop"+f).css("top",T+"%"),w.children(".spt-stop"+f).css("left",T+"%"),w.children(".spt-stopTitle.spt-onlyActive").addClass("spt-reached"),"beam"==v.horStyle?w.children(".spt-stopTitle.spt-onlyActive").css("left","-8px"):w.children(".spt-stopTitle.spt-onlyActive").css("left","0"),m.children(".spt-stop"+f).css("top",T+"%"),$(window).scrollTop()<=e.find(".spt-trackThis:first").offset().top+e.find(".spt-trackThis:first").children(".spt-sectionTitle:first").outerHeight()-o&&w.children(".spt-stopTitle.spt-onlyActive").text(""),$(window).scrollTop()>=s.offset().top+s.children(".spt-sectionTitle:first").outerHeight()-o){w.children(".spt-stopTitle.spt-onlyActive").text(r);{$(window).scrollTop()+$(window).height()}""!=v.finalStopTitle&&($(window).width()<=v.mobileThreshold?($(window).scrollTop()+$(window).height()>=e.offset().top+e.height()+2*c||$(window).scrollTop()+$(window).height()>=$(document).outerHeight())&&w.children(".spt-stopTitle.spt-onlyActive").text(v.finalStopTitle):$(window).scrollTop()+$(window).height()>=$(document).outerHeight()&&w.children(".spt-stopTitle.spt-onlyActive").text(v.finalStopTitle))}v.horOnlyActiveTitle?(w.children(".spt-stop"+f).css("display","none"),w.children(".spt-stopTitle.spt-onlyActive").css("display","block")):(w.children(".spt-stop"+f).css("display","block"),w.children(".spt-stopTitle.spt-onlyActive").css("display","none")),"top"==v.horTitlesOffset?w.children(".spt-stopTitle").css("margin-top",d-S-5+"px").css("margin-left","8px"):"bottom"==v.horTitlesOffset?(w.children(".spt-stopTitle").css("margin-top",h+5+"px").css("margin-left","8px"),w.children(".spt-finalStopTitle").css("margin-top",h+5+"px")):(w.children(".spt-stopTitle").css("margin-top",a-S/2-2+"px").css("margin-left","25px"),w.children(".spt-finalStopTitle").css("margin-top",a-S/2-2+"px").css("margin-right","16px")),"fill"==v.horStyle&&w.children(".spt-onlyActive").css("margin-top","0"),p()>=n?$(".spt-stop"+f).addClass("spt-reached"):$(".spt-stop"+f).removeClass("spt-reached"),p()>=i()?$(".spt-finalStopCircle, .spt-finalStopTitle").addClass("spt-reached"):$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-reached"),v.trackViewportOnly&&p()-$(window).outerHeight()>=n+s.outerHeight()&&$(".spt-stop"+f).removeClass("spt-reached")})}var l,o,e,r,i,p,n,c,a,d,h,S,v=$.extend({horTracker:!0,horInHeader:!1,horPosition:"top",horCenter:!0,horStyle:"fill",horColor:"red",horMobile:!0,horMobileOnly:!1,horStops:!0,horNumbering:!0,horTitles:!1,horTitlesOffset:"bottom",horOnlyActiveTitle:!0,verTracker:!1,verPosition:"left",verStyle:"beam",verColor:"red",verMobile:!1,verMobileOnly:!1,verStops:!0,verNumbering:!1,verTitles:!0,mobileThreshold:1300,trackAllHeadlines:!1,addFinalStop:!1,finalStopTitle:"",hovering:!0,linking:!0,skipHeadlines:!1,scrollSpeed:800,trackViewport:!0,trackViewportOnly:!1},t);i=function(){return e.outerHeight()},v.trackViewport||v.trackViewportOnly?(n=$(window).scrollTop()+$(window).height(),p=function(){return $(window).scrollTop()+$(window).height()-e.offset().top}):(n=$(window).scrollTop(),p=function(){return $(window).scrollTop()-e.offset().top+o}),$(document).ready(function(){function t(){e.find(".spt-trackThis").each(function(t){var s,l=$(this).children(".spt-sectionTitle:first"),o=t+1,e=$(".spt-scrollStopContainer"),r=$(".spt-vertScrollStopContainer"),i=$(".spt-scrollStopTitles"),p=$(".spt-vertScrollStopTitles");if(s=l.attr("data-name")?l.attr("data-name"):l.text(),$(this).attr("id","Section"+o),$(this).children(".spt-sectionTitle:first").attr({id:"SectionHeadline"+o}),e.append('<div class="spt-stopCircle spt-stop'+o+'" data-index="'+o+'" title="'+l.text()+'"></div>'),r.append('<div class="spt-stopCircle spt-stop'+o+'" data-index="'+o+'"></div>'),i.append('<div class="spt-stopTitle spt-stop'+o+'" data-index="'+o+'">'+s+"</div>"),p.append('<div class="spt-stopTitle spt-stop'+o+'" data-index="'+o+'">'+s+"</div>"),v.horNumbering&&(e.children(".spt-stopCircle.spt-stop"+o).append(o),v.addFinalStop)){var n=e.children(".spt-stopCircle").length+1;e.children(".spt-finalStopCircle").text(n)}if(v.verNumbering&&(r.children(".spt-stopCircle.spt-stop"+o).append(o),v.addFinalStop)){var n=r.children(".spt-stopCircle").length+1;r.children(".spt-finalStopCircle").text(n)}}),$(".spt-scrollStopContainer").append($(".spt-scrollStopContainer > .spt-finalStopCircle")),$(window).resize()}if(a=$(".spt-horizontalScrollProgress").outerHeight(!0)-$(".spt-horizontalScrollProgress").height()+$(".spt-horizontalScrollProgress").children(":first-child").height()/2,d=a-$(".spt-horizontalScrollProgress").children(":first-child").height()/2,h=a+$(".spt-horizontalScrollProgress").children(":first-child").height()/2,S=parseFloat($(".spt-scrollStopTitles").css("line-height")),parseFloat($(".spt-centerAll").css("max-width"))>v.mobileThreshold-400&&$(".spt-centerAll").css("max-width",v.mobileThreshold-400+"px"),$(".spt-sectionTitle.spt-trackThis").length){var f=0;$(".spt-sectionTitle.spt-trackThis").each(function(){f++,$(this).removeClass("spt-trackThis").wrap('<div id="Section'+f+'" class="spt-trackThis"></div>');for(var t=!1;!t;)$("#Section"+f).next().length?$("#Section"+f).next()[0]!=$("#Section"+f).siblings(".spt-sectionTitle.spt-trackThis")[0]?$("#Section"+f).append($("#Section"+f).next()):t=!0:t=!0})}if(e=$("#TrackScrollProgress").length?$("#TrackScrollProgress"):$(document),v.trackAllHeadlines?e.find("h1, h2, h3, h4, h5, h6").addClass("spt-sectionTitle"):e.find("h3").addClass("spt-sectionTitle"),c=(e.find(".spt-trackThis").children(".spt-sectionTitle:first").outerHeight(!0)-e.find(".spt-trackThis").children(".spt-sectionTitle:first").outerHeight())/2,e.find(".spt-trackThis:first").children(".spt-sectionTitle").css("margin-top","0"),v.horTracker&&(v.horInHeader&&$("header").length?("bottom"==v.horInHeader?$("header").append('<div class="spt-horizontalScrollProgress"></div>'):$("header").prepend('<div class="spt-horizontalScrollProgress"></div>'),v.horMobileOnly&&$(".spt-horizontalScrollProgress").addClass("spt-mobileOnly"),o=$("header").outerHeight()):($("body").append('<div class="spt-horizontalScrollProgress spt-fixed"></div>'),o="bottom"==v.horPosition?0:$(".spt-horizontalScrollProgress").outerHeight()),!v.trackViewportOnly&&"max"in document.createElement("progress")?($(".spt-horizontalScrollProgress").append('<progress class="spt-scrollProgress"></progress>'),r=$(".spt-scrollProgress")):($(".spt-horizontalScrollProgress").append('<div class="spt-scrollProgressContainer"><span class="spt-scrollProgressBar"></span></div>'),r=$(".spt-scrollProgressContainer")),"bottom"!=v.horPosition||v.horInHeader?v.horInHeader||$("body").css("padding-top",$(".spt-horizontalScrollProgress").height()):($(".spt-horizontalScrollProgress").addClass("spt-bottom"),$("body").css("padding-bottom",$(".spt-horizontalScrollProgress").height()))),"blue"==v.horColor||"blue"==v.verColor?$("head").append('<link href="css/themes/spt-blue.min.css" rel="stylesheet" />'):"green"==v.horColor||"green"==v.verColor?$("head").append('<link href="css/themes/spt-green.min.css" rel="stylesheet" />'):"orange"==v.horColor||"orange"==v.verColor?$("head").append('<link href="css/themes/spt-orange.min.css" rel="stylesheet" />'):("custom"==v.horColor||"custom"==v.verColor)&&$("head").append('<link href="css/themes/spt-custom.css" rel="stylesheet" />'),v.horTracker&&($(".spt-scrollProgress").length&&$(".spt-scrollProgress").attr("value","0"),v.horTitles?($('<div class="spt-scrollStopTitles"></div>').insertAfter(r),$(".spt-scrollStopTitles").append('<div class="spt-stopTitle spt-onlyActive" style="font-weight: bold;"></div>')):r.addClass("spt-untitled"),v.horStops&&$('<div class="spt-scrollStopContainer"></div>').insertAfter(r),v.addFinalStop&&($(".spt-scrollStopContainer").append('<div class="spt-finalStopCircle" title="'+v.finalStopTitle+'"></div>'),v.horOnlyActiveTitle||$(".spt-scrollStopTitles").append('<div class="spt-finalStopTitle">'+v.finalStopTitle+"</div>")),v.horMobile||$(".spt-horizontalScrollProgress").addClass("spt-desktopOnly"),v.horMobileOnly&&$(".spt-horizontalScrollProgress").removeClass("spt-desktopOnly").addClass("spt-mobileOnly"),"fill"==v.horStyle&&$(".spt-horizontalScrollProgress").addClass("spt-styleFill"),"blue"==v.horColor?$(".spt-horizontalScrollProgress").addClass("spt-blue"):"green"==v.horColor?$(".spt-horizontalScrollProgress").addClass("spt-green"):"orange"==v.horColor?$(".spt-horizontalScrollProgress").addClass("spt-orange"):"custom"==v.horColor&&$(".spt-horizontalScrollProgress").addClass("spt-custom"),v.horCenter&&(r.addClass("spt-centerAll"),$(".spt-scrollStopTitles").addClass("spt-centerAll"),$(".spt-scrollStopContainer").addClass("spt-centerAll"))),v.verTracker){$("body").append('<div class="spt-verticalScrollProgress"><div class="spt-verticalScrollProgressContainer"><div class="spt-verticalScrollProgressBar"></div></div></div>'),"right"==v.verPosition&&$(".spt-verticalScrollProgress").addClass("spt-verRight");var T=$(".spt-verticalScrollProgress");v.verMobile||T.addClass("spt-desktopOnly"),v.verMobileOnly&&T.removeClass("spt-desktopOnly").addClass("spt-mobileOnly"),v.verStops&&T.append('<div class="spt-vertScrollStopContainer"></div>'),v.verTitles?T.append('<div class="spt-vertScrollStopTitles"></div>'):T.addClass("spt-untitled"),v.addFinalStop&&($(".spt-vertScrollStopContainer").append('<div class="spt-finalStopCircle"></div>'),$(".spt-vertScrollStopTitles").append('<div class="spt-finalStopTitle">'+v.finalStopTitle+"</div>")),"fill"==v.verStyle&&$(".spt-verticalScrollProgress").addClass("spt-styleFill"),"blue"==v.verColor?$(".spt-verticalScrollProgress").addClass("spt-blue"):"green"==v.verColor?$(".spt-verticalScrollProgress").addClass("spt-green"):"orange"==v.verColor?$(".spt-verticalScrollProgress").addClass("spt-orange"):"custom"==v.verColor&&$(".spt-verticalScrollProgress").addClass("spt-custom")}if($(".spt-scrollProgress").length){var g=$(".spt-scrollProgress");g.attr("max",i()),$(document).scroll(function(){e>=e.offset().top-o?($(window).resize(),g.attr("value",p())):g.attr("value","0")}),$(window).resize(function(){g.attr("max",i()).attr("value",p())})}else{var C,w,m,g=$(".spt-scrollProgressBar"),u=i(),y=function(){return C=p(),w=v.trackViewportOnly?n/u*100:C/u*100,w>100&&(w=100),w+="%"},P=function(){g.css("width",y())},b=function(){return m=($(window).scrollTop()-o)/u*100,m>100&&(m=100),m+="%"},k=function(){g.css("left",b())};$(document).scroll(function(){n>=e.offset().top-o?($(window).resize(),g.css("width",y())):g.css("width","0%")}),$(window).resize(function(){P(),v.trackViewportOnly&&k()})}var C,x,z,A=$(".spt-verticalScrollProgressBar"),u=i(),O=function(){return C=p(),x=v.trackViewportOnly?n/u*100:C/u*100,x>100&&(x=100),x+="%"},H=function(){A.css("height",O())},F=function(){return z=($(window).scrollTop()-o)/u*100,z>100&&(z=100),z+="%"},M=function(){A.css("top",F())};if($(document).scroll(function(){n>=e.offset().top-o?$(window).resize():A.css("height","0%"),$(window).width()<=v.mobileThreshold?(v.horTitles&&$(".spt-scrollStopTitles").children(".spt-onlyActive").addClass("spt-ellipsis"),v.horOnlyActiveTitle||($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block"))):($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-onlyActive").removeClass("spt-ellipsis"),v.horOnlyActiveTitle?($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block")):($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","block"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","none")))}),$(window).resize(function(){a=$(".spt-horizontalScrollProgress").outerHeight(!0)-$(".spt-horizontalScrollProgress").height()+$(".spt-horizontalScrollProgress").children(":first-child").height()/2,d=a-$(".spt-horizontalScrollProgress").children(":first-child").height()/2,h=a+$(".spt-horizontalScrollProgress").children(":first-child").height()/2,$(".spt-scrollStopTitles").append('<div class="spt-placeholder">&nbsp;</div>'),S=parseFloat($(".spt-placeholder").height()),$(".spt-placeholder").remove(),u=i(),H(),v.trackViewportOnly&&M(),s(),$(window).width()<=v.mobileThreshold?($(".spt-horizontalScrollProgress, .spt-scrollProgress, .spt-scrollProgressContainer, .spt-scrollStopContainer, .spt-scrollStopTitles, .spt-verticalScrollProgress").addClass("spt-smallDevice"),v.horOnlyActiveTitle||($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block")),v.horTitlesOffset||$(".spt-scrollStopTitles").children(".spt-onlyActive").css("margin-top",h+5+"px").css("margin-left","8px"),o=v.horTracker&&v.horMobile||v.horTracker&&v.horMobileOnly?$(".spt-horizontalScrollProgress").outerHeight():0):($(".spt-horizontalScrollProgress, .spt-scrollProgress, .spt-scrollProgressContainer, .spt-scrollStopContainer, .spt-scrollStopTitles, .spt-verticalScrollProgress").removeClass("spt-smallDevice"),v.horOnlyActiveTitle?($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","none"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","block")):($(".spt-scrollStopTitles").children(".spt-stopTitle, .spt-finalStopTitle").css("display","block"),$(".spt-scrollStopTitles").children(".spt-onlyActive").css("display","none")),o=v.horTracker&&!v.horMobileOnly?$(".spt-horizontalScrollProgress").outerHeight():0),$(window).width()>=v.mobileThreshold+100?($(".spt-verticalScrollProgress").css("width",180+($(window).width()-v.mobileThreshold)/2-50+"px"),$(".spt-vertScrollStopTitles").css("width",170+($(window).width()-v.mobileThreshold)/2-50+"px")):($(".spt-verticalScrollProgress").css("width","180px"),$(".spt-vertScrollStopTitles").css("width","170px"))}),t(),v.linking&&($(".spt-stopCircle, .spt-stopTitle").click(function(){l=$("#SectionHeadline"+$(this).attr("data-index")).length?v.skipHeadlines||$(window).width()<=v.mobileThreshold&&v.horTitles?$("#SectionHeadline"+$(this).attr("data-index")).offset().top+$("#SectionHeadline"+$(this).attr("data-index")).height()-o+1:$("#SectionHeadline"+$(this).attr("data-index")).offset().top-parseFloat($("#SectionHeadline"+$(this).attr("data-index")).css("margin-top"))-o+1:$("#Section"+$(this).attr("data-index")).offset().top-o-2,$("html, body").animate({scrollTop:l},v.scrollSpeed)}),$(".spt-finalStopCircle, .spt-finalStopTitle").click(function(){l=e.children(":last-child").children(":first-child").is(".spt-sectionTitle")?v.skipHeadlines||$(window).width()<=v.mobileThreshold&&v.horTitles?e.children(":last-child").children(":first-child").offset().top+e.children(":last-child").children(":first-child").height()-o+1:e.children(":last-child").children(":first-child").offset().top-parseFloat(e.children(":last-child").children(":first-child").css("margin-top"))-o+1:e.children(":last-child").offset().top-o-2,$("html, body").animate({scrollTop:l},v.scrollSpeed)})),v.hovering){var V;$(".spt-scrollStopContainer .spt-stopCircle, .spt-scrollStopTitles .spt-stopTitle").hover(function(){V=$(this).attr("data-index"),$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover"),$(".spt-scrollStopContainer .spt-stop"+V+", .spt-scrollStopTitles .spt-stop"+V).addClass("spt-hover")},function(){$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover")}),$(".spt-vertScrollStopContainer .spt-stopCircle, .spt-vertScrollStopTitles .spt-stopTitle").hover(function(){V=$(this).attr("data-index"),$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover"),$(".spt-vertScrollStopContainer .spt-stop"+V+", .spt-vertScrollStopTitles .spt-stop"+V).addClass("spt-hover")},function(){$(".spt-stopCircle, .spt-stopTitle").removeClass("spt-hover")}),$(".spt-scrollStopContainer .spt-finalStopCircle, .spt-scrollStopTitles .spt-finalStopTitle").hover(function(){$(".spt-scrollStopContainer .spt-finalStopCircle, .spt-scrollStopTitles .spt-finalStopTitle").addClass("spt-hover")},function(){$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-hover")}),$(".spt-vertScrollStopContainer .spt-finalStopCircle, .spt-vertScrollStopTitles .spt-finalStopTitle").hover(function(){$(".spt-vertScrollStopContainer .spt-finalStopCircle, .spt-vertScrollStopTitles .spt-finalStopTitle").addClass("spt-hover")},function(){$(".spt-finalStopCircle, .spt-finalStopTitle").removeClass("spt-hover")})}$(document).scroll()})};